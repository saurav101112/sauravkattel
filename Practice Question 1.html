<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Entrance Exam</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary: #4e54c8;
            --secondary: #8f94fb;
            --accent: #00d2ff;
            --success: #28a745;
            --error: #dc3545;
            --dark: #1a1a2e;
            --light: #ffffff;
            --glass: rgba(255, 255, 255, 0.95);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .overlay {
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top so scrolling works on mobile */
            padding: 40px 20px;
            box-sizing: border-box;
            background: rgba(0,0,0,0.2);
            overflow-y: auto;
        }

        /* --- Main Container --- */
        #quiz-container, #result-section {
            width: 100%;
            max-width: 900px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 40px;
            position: relative;
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            margin-bottom: 40px;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* --- Header & Timer --- */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }

        .brand {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.2rem;
        }

        #timer {
            font-family: 'Roboto Mono', monospace;
            font-size: 1.2rem;
            color: var(--primary);
            background: #eee;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- Progress Bar --- */
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            height: 8px;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.5s ease;
        }

        /* --- Questions --- */
        .question {
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .question h3 {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: #222;
        }

        /* --- Modern Option Cards --- */
        .options {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive Grid */
            gap: 15px;
        }

        .option-item {
            position: relative;
        }

        /* Hide default radio */
        .option-item input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        /* Custom Label Card */
        .option-item label {
            display: block;
            padding: 15px 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            color: #555;
            position: relative;
        }

        .option-item label:hover {
            background: #fff;
            border-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        /* Checked State */
        .option-item input[type="radio"]:checked + label {
            background: rgba(78, 84, 200, 0.1);
            border-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .option-item input[type="radio"]:checked + label::after {
            content: '✓';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
        }

        /* --- Buttons --- */
        .btn-group {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }

        button {
            padding: 12px 30px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-nav {
            background: #fff;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-nav:hover {
            background: var(--primary);
            color: #fff;
        }

        .btn-nav:disabled {
            border-color: #ccc;
            color: #ccc;
            cursor: not-allowed;
            background: transparent;
        }

        #submit {
            background: linear-gradient(45deg, #11998e, #38ef7d);
            color: white;
            width: 100%;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        #submit:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.6);
        }

        /* --- Results Section --- */
        #result-section {
            display: none;
            text-align: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--success) 0%, #ddd 0%);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 30px;
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 130px;
            height: 130px;
            background: #fff;
            border-radius: 50%;
        }

        .score-text {
            position: relative;
            z-index: 2;
            font-size: 2rem;
            font-weight: bold;
            color: #333;
        }

        .result-msg {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #555;
        }

        /* --- Review Mode Styles (Correct/Incorrect) --- */
        .review-mode .option-item input[type="radio"]:checked + label {
            border-color: var(--error);
            background: rgba(220, 53, 69, 0.1);
            color: var(--error);
        }

        .review-mode .option-item input[type="radio"]:checked + label::after {
            content: '✗';
            color: var(--error);
        }

        /* Correct Answer Style in Review Mode */
        .review-mode .option-item.is-correct label {
            border-color: var(--success) !important;
            background: rgba(40, 167, 69, 0.2) !important;
            color: var(--success) !important;
            font-weight: bold;
        }
        
        .review-mode .option-item.is-correct label::after {
            content: '✓';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--success);
            font-weight: bold;
        }

        /* Mobile Responsive */
        @media (max-width: 600px) {
            #quiz-container { padding: 20px; }
            .options { grid-template-columns: 1fr; }
            .btn-group { flex-direction: row; }
            button { padding: 10px 20px; font-size: 14px; }
        }
    </style>
</head>
<body>
    <div class="overlay">
        <div id="quiz-container">
            <div class="quiz-header">
                <div class="brand">Entrance Exam</div>
                <div id="timer">⏳ 01:30:00</div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div id="questions-container">
                </div>

            <div class="btn-group">
                <button class="btn-nav" id="prev-btn" onclick="prevPage()">Previous</button>
                <button class="btn-nav" id="next-btn" onclick="nextPage()">Next</button>
            </div>

            <button id="submit" onclick="validateAndSubmit()">Submit & Finish Exam</button>
        </div>

        <div id="result-section">
            <h2>Exam Completed</h2>
            <div class="score-circle" id="score-circle">
                <div class="score-text" id="score-text">0%</div>
            </div>
            <div class="result-msg" id="result-msg"></div>
            
            <div class="btn-group" style="justify-content: center;">
                <button class="btn-nav" onclick="viewAnswers()">Review Answers</button>
                <button class="btn-nav" onclick="location.reload()">Retake Exam</button>
            </div>
        </div>
    </div>

    <script>
        // Paste your huge list of questions here exactly as they were
        const questions = [
            { question: "I work hard and ........... Ritesh.", options: ["so does", "does so", "such does", "does too"], answer: "so does" },
            { question: "He said to her, 'don't read so fast.' The indirect form is:", options: ["he told her not read so fast", "he advised her not to read so fast", "he requested to her don't read so fast", "he asked her not to read so fast"], answer: "he told her not read so fast" },
            { question: "There is a boy painting the wall, ............?", options: ["isn't it", "isn't she", "isn't there", "isn't cow"], answer: "isn't there" },
            { question: "The accused ........ to the judge for mercy.", options: ["asked", "appealed", "applied", "demanded"], answer: "appealed" },
            { question: "We are now confident ............ winning the match.", options: ["to", "in", "of", "into"], answer: "of" },
            { question: "He has given ............ bad habits.", options: ["for", "in", "up", "to"], answer: "up" },
            { question: "The meaning of 'To get into hot water' is:", options: ["to be impatient", "to suffer a huge financial loss", "to get into trouble", "to be in a confused state of mind"], answer: "to get into trouble" },
            { question: "The synonym of 'LETHAL' is:", options: ["dreary", "dreadful", "deadly", "strange"], answer: "deadly" },
            { question: "The girl walks as if she:", options: ["studies modeling", "studied modeling", "had studied modeling", "has studied modeling"], answer: "had studied modeling" },
            { question: "The alternative of 'He asked me if he did shut the window' is:", options: ["should shut the window", "may shut the window", "will shut the window", "do shut the window"], answer: "should shut the window" },
            { question: "Choose the word which best expresses the meaning of the word 'BRIEF'.", options: ["limited", "small", "little", "short"], answer: "short" },
            { question: "We ate ............ wonderful meal yesterday.", options: ["a", "an", "the", "no article"], answer: "a" },
            { question: "The plural form of 'louse' is:", options: ["louses", "lice", "lices", "none"], answer: "lice" },
            { question: "You need a ....... to run a business.", options: ["lease", "lisense", "lisence", "license"], answer: "license" },
            { question: "Each of the mistakes:", options: ["has been corrected", "have been corrected", "are being corrected", "were being corrected"], answer: "has been corrected" },
            { question: "The man talked about the match as though", options: ["had taken", "took", "takes", "will take"], answer: "had taken" },
            { question: "Fear of height is called:", options: ["nyctophobia", "heightophobia", "ergophobia", "acrophobia"], answer: "acrophobia" },
            { question: "In the reaction given in the photo below", options: ["MnO4- and H+ both are reduced", "MnO4- is reduced and H+ is oxidized", "MnO4- is reduced and SO3 2- is oxidized", "MnO4- is oxidized and SO3 2- is reduced"], answer: "MnO4- is reduced and SO3 2- is oxidized" },
            { question: "Phenol is treated with bromine water and shaken well to give a white precipitate of:", options: ["2,4,6-tribromophenol", "2,4-dibromophenol", "1-bromophenol", "mixture of o-, p-bromophenol"], answer: "2,4,6-tribromophenol" },
            { question: "If the temperature is doubled and pressure is halved, the volume of gas is:", options: ["constant", "half", "double", "quadruple"], answer: "quadruple" },
            { question: "The process of conversion of liquid into vapor is:", options: ["melting", "freezing", "evaporation", "condensation"], answer: "evaporation" },
            { question: "The permanent hardness of water is removed by:", options: ["boiling", "passing through permutit", "adding lime", "chlorination"], answer: "passing through permutit" },
            { question: "IUPAC name of compound (CH3)3CCOOH is:", options: ["2-mehtylpropanoic acid", "2,2-dimethlypropanoic acid", "pentanoic acid", "methylbutanoic acid"], answer: "2,2-dimethlypropanoic acid" },
            { question: "When phenolphthalein indicator is kept in NaOH (base), its colour is:", options: ["colourless", "green", "blue", "pink"], answer: "pink" },
            { question: "Which of the following substances is a good conductor of heat and electricity?", options: ["Dimond", "NaCl (solid)", "Graphite", "None of the above"], answer: "Graphite" },
            { question: "According to Faraday's first law of electrolysis, the mass of anion liberated is equal to:", options: ["Zc", "ZQ", "Zet", "Zet/nf"], answer: "ZQ" },
            { question: "Iodine is titrated with ..................... using a starch indicator.", options: ["silver nitrate", "sodium thiosulphate", "potassium permanganate", "potassium iodide"], answer: "sodium thiosulphate" },
            { question: "Buffer solution works on the basis of:", options: ["solubility product principle", "law of mass action", "kinetics of the reaction", "common ion effect"], answer: "common ion effect" },
            { question: "The osmosis taking place from solution to pure water by application of pressure greater than osmotic pressure on the solution is:", options: ["equilibrium osmosis", "irreversible osmosis", "normal osmosis", "reverse osmosis"], answer: "reverse osmosis" },
            { question: "Dehydration of alcohol is an example of:", options: ["addition reaction", "substitution", "elimination", "re-arrangement"], answer: "elimination" },
            { question: "Among the following, the strongest acid is:", options: ["CH3COOH", "CH2CICH2COOH", "CH2CICOOH", "CH3CH2COOH"], answer: "CH2CICOOH" },
            { question: "Silver nitrate is also called:", options: ["silver glance", "horn silver", "lunar caustic", "ruby silver"], answer: "lunar caustic" },
            { question: "The volume of water to be added to 25 ml of a 4N HCl solution to obtain 1N solution is:", options: ["25 ml", "50 ml", "75 ml", "100 ml"], answer: "75 ml" },
            { question: "0.53 g of Na2CO3 is added to 5 ml of 2N acid. The resulting mixture is:", options: ["acidic", "basic", "slightly acidic", "neutral"], answer: "acidic" },
            { question: "The number of valency electrons in a carbon atom (Z = 6) is:", options: ["0", "2", "4", "6"], answer: "4" },
            { question: "Which of the following element is the most metallic?", options: ["Pb", "As", "Sb", "Bi"], answer: "Bi" },
            { question: "Use of hot air balloons is an application of:", options: ["Boyle's law", "Charle's law", "Dalton's law", "Grahm's law"], answer: "Boyle's law" },
            { question: "Aerobic decomposition of organic matter, i.e. glucose by bacteria in water sediments produces:", options: ["propene", "methane", "ethane", "butane"], answer: "methane" },
            { question: "In the Doppler effect, the frequency depends on:", options: ["velocity of sound", "the velocity of the source", "velocity of listener", "all of the above"], answer: "all of the above" },
            { question: "The Young's Modulus for a perfectly rigid body is:", options: ["zero", "infinity", "unity", "finite"], answer: "infinity" },
            { question: "A liquid is placed in a graduated glass cylinder. The coefficient of real expansion of the liquid is thrice that of linear expansion of the glass. On heating the level of liquid will:", options: ["first decreases then increase", "decreases", "increases", "approximately remains the same"], answer: "approximately remains the same" },
            { question: "The rate of heat loss from a hot body depends on the:", options: ["temperature of the body", "the thermal capacity of the body", "excess temperature of the body over the surrounding", "the temperature of the surrounding"], answer: "excess temperature of the body over the surrounding" },
            { question: "Two straight parallel conductors carrying current in opposite directions:", options: ["attract each other", "repel each other", "do not experience any force", "none of the above"], answer: "repel each other" },
            { question: "Which of the following represents the correct dimensions of the coefficient of viscosity?", options: ["M L-1 T-2", "M L T-1", "M L-1 T-1", "M L2 T-2"], answer: "M L-1 T-1" },
            { question: "First law of thermodynamics is a consequence of the conversion of", options: ["energy", "charge", "heat", "all of the above"], answer: "energy" },
            { question: "Thermocouple thermometer is based on the principle of:", options: ["Seeback effect", "Peltier effect", "Joule's effect", "Thomson's effect"], answer: "Seeback effect" },
            { question: "A box weighing 30 kg is pushed along the floor at a constant speed by applying horizontal force. If the coefficient of sliding friction is 0.2, then the force applied is:", options: ["6 N", "12 N", "60 N", "240 N"], answer: "60 N" },
            { question: "The average translational kinetic energy of a molecule is given:", options: ["1.5 KT", "1.5 RT", "0.5 KT", "0.5 RT"], answer: "1.5 KT" },
            { question: "When a particle and its antiparticle are annihilated, the energy release is E. What is the mass of each particle?", options: ["E / c^2", "E / 2c", "E / 2 c^2", "E / c"], answer: "E / 2 c^2" },
            { question: "Which of the following is not a unit of length?", options: ["radian", "angstrom", "light year", "micron"], answer: "radian" },
            { question: "An equi-convex lens has a power of 5 Dioptre. If it is made of glass with a refractive index of 1.5. What is the radius of curvature of each surface?", options: ["30 cm", "20 cm", "16 cm", "10 cm"], answer: "20 cm" },
            { question: "A dynamo:", options: ["creates mechanical energy", "creates electrical energy", "converts mechanical to electrical energy", "converts electrical to mechanical energy"], answer: "converts mechanical to electrical energy" },
            { question: "The source of a magnetic field is:", options: ["an isolated magnetic pole", "static electric charge", "magnetic substances", "current loop"], answer: "current loop" },
            { question: "Middle lamella contains:", options: ["chitin", "pectin", "lignin", "cellulose"], answer: "pectin" },
            { question: "DNA replicates during:", options: ["S-phase", "prophase", "G1 phase", "G2 phase"], answer: "S-phase" },
            { question: "Agar-agar is obtained from:", options: ["gellidium", "chlamydomonas", "volvox", "ulothrix"], answer: "gellidium" },
            { question: "Stem of ginger is:", options: ["rhizoid", "pulp", "rhizome", "corm"], answer: "rhizome" },
            { question: "The term aestivation refers to:", options: ["arrangement of leaf", "arrangement of sepals", "arrangement of petals", "both b and c"], answer: "both b and c" },
            { question: "Point mutation involves", options: ["insertion", "duplication", "deletion", "change in single base pair"], answer: "change in single base pair" },
            { question: "Phytohormone delaying senescence is:", options: ["auxin", "cytokinin", "ethylene", "gibberellin"], answer: "cytokinin" },
            { question: "The stalk bearing an inflorescence is called:", options: ["peduncle", "pedicle", "petiole", "rachis"], answer: "peduncle" },
            { question: "The most abundant carbohydrate in plants is:", options: ["glucose", "sucrose", "starch", "cellulose"], answer: "cellulose" },
            { question: "Vegetative propagation in onion is carried out through:", options: ["tuber", "corm", "bulbil", "bulb"], answer: "bulb" },
            { question: "Which cell organelle is called the powerhouse of the cell?", options: ["chloroplast", "golgi body", "mitochondria", "endoplasmic reticulum"], answer: "mitochondria" },
            { question: "Chloroplast is the center of:", options: ["fat synthesis", "sugar synthesis", "RNA synthesis", "protein synthesis"], answer: "sugar synthesis" },
            { question: "In angiosperms, the xylem is made of:", options: ["tracheids and fibres", "tracheids and vessels", "vessels and fibers", "all of the above"], answer: "all of the above" },
            { question: "The alcoholic fermentation is carried by the yeast known as:", options: ["Wilmot cerevisiae", "Saccharomyces cerevisiae", "Lactobacillus acidophilus", "Lactobacillus cerevisiae"], answer: "Saccharomyces cerevisiae" },
            { question: "Nitrogen-fixing algae comes under:", options: ["blue-green algae", "green algae", "red algae", "brown algae"], answer: "blue-green algae" },
            { question: "The edible portion of coconut is:", options: ["endosperm", "mesocarp", "seed coat", "pericarp"], answer: "endosperm" },
            { question: "Grafting cannot be done in monocots because they:", options: ["lack cambium", "triple fusion", "have parallel vascular bundles", "embryogeny"], answer: "lack cambium" },
            { question: "Which carbon pathway is used by sugarcane during photosynthesis?", options: ["C3", "C4", "C5", "C2"], answer: "C4" },
            { question: "What is the conservation process of conserving genetic resources in gene banks?", options: ["ex-situ", "in-situ", "both", "none of the above"], answer: "ex-situ" },
            { question: "When phloem is present on both sides of the xylem, the vascular bundle is said to be:", options: ["collateral", "bicollateral", "radial", "conjoint"], answer: "bicollateral" },
            { question: "A monocot angiosperm has:", options: ["tap root", "corolla in sets of five", "scattered vascular bundles", "six groups of xylem"], answer: "scattered vascular bundles" },
            { question: "A species is produced by the loss or disappearance of a few characters found in the parent. It is termed as:", options: ["progressive species", "retrogressive species", "successive species", "digressive species"], answer: "retrogressive species" },
            { question: "Mammary glands consist of:", options: ["sweat glands", "sebaceous glands", "alveolar glands", "oil glands"], answer: "sweat glands" },
            { question: "Suppose you felt an earthquake, which of the sense organs was involved:", options: ["proprioceptors", "skin of your sole", "eye", "ear"], answer: "ear" },
            { question: "Origin of life took place in:", options: ["precambrian", "coenozoic", "mesozoic", "palaeozoic"], answer: "precambrian" },
            { question: "The simplest amino acid is:", options: ["trytophan", "histidine", "glycine", "phenylalanine"], answer: "glycine" },
            { question: "What is studied under chondrology?", options: ["tendon", "cartilages", "bone", "muscle"], answer: "cartilages" },
            { question: "Cephalopoda is a class of animals in which:", options: ["head is located on foot", "foot is located on head", "head is fuse to thorax", "all of the above"], answer: "foot is located on head" },
            { question: "Lysosome contain an enzyme which is:", options: ["hydrolytic", "oxidative", "reductive", "proteolytic"], answer: "hydrolytic" },
            { question: "Cytology and histology combined are called:", options: ["microbiology", "microtomy", "microanatomy", "all of the above"], answer: "microanatomy" },
            { question: "For completing the life cycle tapeworm requires:", options: ["snail", "pig", "man", "none of the above"], answer: "pig" },
            { question: "Soundbox in birds is known as:", options: ["larynx", "syrinx", "synsarum", "pygostyle"], answer: "syrinx" },
            { question: "The number of vertebrae in the human body is:", options: ["28", "30", "33", "37"], answer: "33" },
            { question: "The endocrine part of the pancreas is known as:", options: ["crypts of Lieberkuhn", "islets of Langerhans", "peyer's patches", "acini"], answer: "islets of Langerhans" },
            { question: "The invertebrate without neuron is:", options: ["hydra", "planaria", "sponge", "earthworm"], answer: "sponge" },
            { question: "Which of the following has a three-chambered heart?", options: ["frog", "snake", "crocodile", "lizard"], answer: "lizard" },
            { question: "The liver stores food in the form of:", options: ["glucose", "glycogen", "albumen", "ATP"], answer: "glycogen" },
            { question: "Bats can fly in the dark because", options: ["the pupils of their eyes are very big", "they have a better vision in dark", "they are guided by ultrasonic waves produced by them", "any bird can do so"], answer: "they are guided by ultrasonic waves produced by them" },
            { question: "Male frogs can croak louder than females because of:", options: ["larger size", "larger soundbox", "stronger built", "vocal sacs"], answer: "vocal sacs" },
            { question: "Oxytocin hormone is secreted by:", options: ["adrenal gland", "thyroid gland", "ovaries", "pituitary gland"], answer: "pituitary gland" },
            { question: "What was the most significant trend in the evolution of modern man (Homo sapiens) from his ancestors?", options: ["binocular vision", "upright posture", "shortening of jaws", "increasing brain capacity"], answer: "increasing brain capacity" },
            { question: "Chlorofluorocarbon are non-flammable chemicals mainly used in:", options: ["perfumes", "refrigerators", "air conditioners", "all of the above"], answer: "all of the above" },
            { question: "Set 'A' has 3 elements and set 'B' has 6 elements, then the minimum number of elements in A U B are:", options: ["3", "9", "6", "0"], answer: "6" },
            { question: "There are 5 subjects in an examination. In how many ways may a student fail?", options: ["16", "31", "32", "18"], answer: "31" },
            { question: "The number of circles of a given radius that touches both of the axes is:", options: ["3", "4", "1", "2"], answer: "4" }
        ];

        const questionsPerPage = 5; // Reduced to 5 for better scrolling on mobile
        let currentPage = 0;
        let userAnswers = Array(questions.length).fill(null);
        let timeLeft = 90 * 60;
        
        // Dom Elements
        const timerDisplay = document.getElementById('timer');
        const questionsContainer = document.getElementById('questions-container');
        const progressBar = document.getElementById('progress-bar');
        const quizContainer = document.getElementById('quiz-container');
        const resultSection = document.getElementById('result-section');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit');

        // Timer
        function startTimer() {
            const timer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.innerText = `⏳ ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    validateAndSubmit();
                }
                timeLeft--;
            }, 1000);
        }

        // Load Questions
        function loadQuestions(isReview = false) {
            questionsContainer.innerHTML = '';
            const start = currentPage * questionsPerPage;
            const end = Math.min(start + questionsPerPage, questions.length);
            const currentQuestions = questions.slice(start, end);

            // Update Progress Bar
            const progressPercent = ((currentPage + 1) / Math.ceil(questions.length / questionsPerPage)) * 100;
            progressBar.style.width = `${progressPercent}%`;

            currentQuestions.forEach((q, index) => {
                const actualIndex = start + index;
                
                const qDiv = document.createElement('div');
                qDiv.classList.add('question');
                
                const qTitle = document.createElement('h3');
                qTitle.textContent = `${actualIndex + 1}. ${q.question}`;
                qDiv.appendChild(qTitle);

                const optList = document.createElement('div');
                optList.classList.add('options');

                q.options.forEach((opt, i) => {
                    const optItem = document.createElement('div');
                    optItem.classList.add('option-item');
                    
                    // Review Mode Logic
                    if (isReview) {
                        if (opt === q.answer) optItem.classList.add('is-correct');
                    }

                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = `q${actualIndex}`;
                    input.id = `q${actualIndex}_opt${i}`;
                    input.value = opt;
                    if (userAnswers[actualIndex] === opt) input.checked = true;
                    
                    // Disable inputs during review
                    if (isReview) input.disabled = true;

                    // Event Listener for Selection
                    if (!isReview) {
                        input.addEventListener('change', () => {
                            userAnswers[actualIndex] = opt;
                        });
                    }

                    const label = document.createElement('label');
                    label.setAttribute('for', `q${actualIndex}_opt${i}`);
                    label.textContent = opt;

                    optItem.appendChild(input);
                    optItem.appendChild(label);
                    optList.appendChild(optItem);
                });

                qDiv.appendChild(optList);
                questionsContainer.appendChild(qDiv);
            });

            // Button Visibility
            prevBtn.disabled = currentPage === 0;
            
            if (end >= questions.length) {
                nextBtn.style.display = 'none';
                if(!isReview) submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
            
            // Scroll to top of container
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextPage() {
            currentPage++;
            loadQuestions(resultSection.style.display === 'none' ? false : true); // check if in review mode based on visibility logic
        }

        function prevPage() {
            currentPage--;
            loadQuestions(resultSection.style.display === 'none' ? false : true);
        }

        // Validation & Scoring
        function validateAndSubmit() {
            const unAnswered = userAnswers.findIndex(a => a === null);
            if (unAnswered !== -1) {
                alert(`You haven't answered Question ${unAnswered + 1} yet!`);
                currentPage = Math.floor(unAnswered / questionsPerPage);
                loadQuestions();
                return;
            }

            calculateScore();
        }

        function calculateScore() {
            let score = 0;
            userAnswers.forEach((ans, i) => {
                if (ans === questions[i].answer) score++;
            });

            showResults(score);
        }

        function showResults(score) {
            quizContainer.style.display = 'none';
            resultSection.style.display = 'block';
            
            const percentage = Math.round((score / questions.length) * 100);
            
            // Animate Score Circle
            const circle = document.getElementById('score-circle');
            circle.style.background = `conic-gradient(${percentage >= 40 ? 'var(--success)' : 'var(--error)'} ${percentage}%, #ddd ${percentage}%)`;
            document.getElementById('score-text').textContent = `${percentage}%`;
            
            document.getElementById('result-msg').textContent = `You scored ${score} / ${questions.length}`;

            // Celebration if passed (e.g., > 40%)
            if (percentage >= 40) {
                launchConfetti();
            }
        }

        function viewAnswers() {
            resultSection.style.display = 'none';
            quizContainer.style.display = 'block';
            
            // Switch to Review Mode
            quizContainer.classList.add('review-mode');
            document.querySelector('.brand').textContent = "Review Answers";
            document.getElementById('timer').style.display = 'none';
            document.getElementById('submit').style.display = 'none';
            
            currentPage = 0;
            loadQuestions(true); // Pass true for review mode
        }

        // Confetti Effect
        function launchConfetti() {
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: 0.1, y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: 0.7, y: Math.random() - 0.2 } }));
            }, 250);
        }

        // Initialize
        loadQuestions();
        startTimer();

    </script>
</body>
</html>
